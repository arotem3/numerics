CXX = g++
CXXFLAGS = -g -Wall -fPIC
LDFLAGS = -shared
LIBS = -larmadillo
DEPS = numerics.hpp
TARGET = numerics.so

SRCS = eval.cpp finite_dif.cpp interp.cpp polyInterp.cpp cinterp.cpp sincInterp.cpp integrate.cpp mcIntegrate.cpp roots.cpp newton.cpp fixedpoint.cpp optimiz.cpp genetic.cpp kmeans.cpp simplex.cpp
OBJS = $(SRCS:.cpp=.o)

.PHONY: all
all: ${TARGET}

$(TARGET): $(OBJS)
	$(CXX) ${LDFLAGS} -o $@ $^

$(SRCS:.cpp=.d):%.d:%.cpp
	$(CXX) $(CXXFLAGS) -MM $< >$@

include $(SRCS:.cpp=.d)

.PHONY: clean
clean:
	rm ${TARGET} ${OBJS} $(SRCS:.cpp=.d)